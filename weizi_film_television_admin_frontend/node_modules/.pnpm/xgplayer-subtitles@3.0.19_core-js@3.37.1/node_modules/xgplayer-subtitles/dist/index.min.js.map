{"version":3,"file":"index.min.js","sources":["../../../node_modules/eventemitter3/index.js","../src/parser.js","../src/error.js","../src/xhr.js","../src/proxyPromise.js","../src/utils.js","../src/observer.js","../src/constants.js","../src/index.js"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","const VTT_CHECK = /^WEBVTT/\nconst VTT_STYLE = /^STYLE+$/\n// eslint-disable-next-line no-useless-escape\nconst VTT_CUE = /^\\:\\:cue/\nconst VTT_CUEND = /^}+$/\nconst ASS_CHECK = /^\\[Script Info\\].*/\n\n// const HTML_REGEX = /<[a-zA-Z]+.*?>([\\s\\S]*?)<\\/[a-zA-Z]*?>/  匹配html标签\n\n// String a1 = \"[0-9]{4}[0-9]{2}[0-9]{2}[0-9]{2}[0-9]{2}[0-9]{2}\";//yyyyMMddHHmmss\n// String a2 = \"[0-9]{4}[0-9]{2}[0-9]{2}\";//yyyyMMdd\n// String a3 = \"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}\";//yyyy-MM-dd HH:mm:ss\n// String a4 = \"[0-9]{4}-[0-9]{2}-[0-9]{2}\";//yyyy-MM-dd\n// String a5= \"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}\";\n// const TIME_REGEX = /[0-9]{2}:[0-9]{2}:[0-9]{2}\\.[0-9]{3}-->[0-9]{2}:[0-9]{2}:[0-9]{2}\\.[0-9]{3}/\n\nconst TIME_REGEX_LIST = [\n  /[0-9]{1,3}:[0-9]{2}:[0-9]{2}\\.[0-9]{1,3}-->[0-9]{1,3}:[0-9]{2}:[0-9]{2}\\.[0-9]{1,3}/,\n  /[0-9]{1,3}:[0-9]{2}\\.[0-9]{1,3}-->[0-9]{1,3}:[0-9]{2}\\.[0-9]{1,3}/,\n  /[0-9]{1,2}\\.[0-9]{1,3}-->[0-9]{1,2}\\.[0-9]{1,3}/\n]\n// const LANG_REGEX = /^(<?.+?>(([\\s\\S])*?)<\\/?.+?>)$/\n\nconst MAX_COUNT = 50\n\nconst ASS_FORMAT = /^Format:\\s/\nconst ASS_STYLE = /^Style:\\s/\nconst ASS_DIALOGUE = /^Dialogue:\\s/\n// const ASS_EVENTS = /^\\[Events\\]:\\s/\n\nfunction getSecond (arr) {\n  const len = arr.length\n  if (len === 3) {\n    return ((Number(arr[0]) * 60 + Number(arr[1])) * 60 * 1000 + Number(arr[2]) * 1000) / 1000\n  } else if (len === 2) {\n    return (Number(arr[0]) * 60 * 1000 + Number(arr[1]) * 1000) / 1000\n  } else {\n    return Number(arr[0])\n  }\n}\n\n/**\n * 校验是否是数字\n * @param {String} str\n */\nfunction isNumber (str) {\n  // eslint-disable-next-line no-useless-escape\n  return /^(\\-|\\+)?\\d+(\\.\\d+)?$/.test(str)\n}\n\n/**\n * 对html内容进行转义，避免使用innerHTML的时候出现DOM XSS漏洞\n * @param  {[type]} e [description]\n * @return {[type]}   [description]\n */\nfunction htmlEncodeAll (e) {\n  return e\n  // return null === e ? '' : e.replace(/\\&/g, '&amp;').replace(/\\</g, '&lt;').replace(/\\>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;');\n}\n\nfunction getByIndex (i, arr) {\n  if (i >= 0 && i < arr.length) {\n    return arr[i]\n  }\n  return ''\n}\nexport default class SubTitleParser {\n  /**\n   * 解析json数据进行分组\n   * @param {Array<{\n   *    start: number,\n   *    end: number,\n   *    text: Array<string>\n   * }>} list\n   * @returns\n   */\n  static parseJson (list) {\n    const ret = []\n    let count = 0\n    for (let i = 0; i < list.length; i++) {\n      if (count >= MAX_COUNT) {\n        count = 0\n      }\n      if (count === 0) {\n        const item = {\n          start: list[i].start,\n          list: [list[i]],\n          end: list[i].end\n        }\n        ret.push(item)\n      } else {\n        ret[ret.length - 1].list.push(list[i])\n        ret[ret.length - 1].end = list[i].end\n      }\n      count++\n    }\n    return ret\n  }\n\n  static parse (str, fun) {\n    const format = SubTitleParser.checkFormat(str)\n    if (!format) {\n      fun({ format })\n    }\n    try {\n      let ret = []\n      if (format === 'ass') {\n        ret = SubTitleParser.parseASS(str)\n      } else if (format === 'vtt') {\n        ret = SubTitleParser.parseVTT(str)\n      }\n      fun({ format, list: ret.list, styles: ret.styles })\n    } catch (error) {\n      console.error(error)\n      fun({ format }, error)\n    }\n  }\n\n  static parseASSItem (str = '', mode = []) {\n    const values = str.split(',')\n    const item = {}\n    let text = ''\n    try {\n      const len = values.length - mode.length\n      if (len > 0) {\n        text = values.splice(mode.length - 1, len + 1).join(',') + ''\n      } else {\n        text = values[values.length - 1] + ''\n      }\n      text = text.replace(/\\\\n+/g, '')\n      text = htmlEncodeAll(text)\n      values[mode.length - 1] = text\n      mode.map((key, index) => {\n        if (key === 'end' || key === 'start') {\n          item[key] = getSecond(values[index].split(':'))\n        } else if (key === 'text') {\n          item[key] = [values[index]]\n        } else if (key === 'layer') {\n          item[key] = [values[index]]\n          item.textTag = [values[index]]\n        } else if (key === 'style') {\n          item[key] = [values[index]]\n        } else {\n          item[key] = Number(values[index]) ? Number(values[index]) : values[index]\n        }\n      })\n      return item\n    } catch (error) {\n      console.error(error)\n      return {}\n    }\n  }\n\n  static parseASS (str) {\n    const arr = str.split('\\n')\n    const retData = []\n    let i = 0; let groupCount = 0\n    const styles = []\n    let mode = []\n    let lastSubTitle = null\n    while (i < arr.length) {\n      if (ASS_FORMAT.test(arr[i])) {\n        mode = arr[i].replace(ASS_FORMAT, '').replace(/\\s+/g, '').split(',')\n        mode = mode.map(item => {\n          return item.toLocaleLowerCase()\n        })\n      } else if (ASS_STYLE.test(arr[i])) {\n        styles.push(arr[i].replace(ASS_STYLE, '').replace(/\\s+/g, ''))\n      } else if (ASS_DIALOGUE.test(arr[i])) {\n        const subTitle = SubTitleParser.parseASSItem(arr[i].replace(ASS_DIALOGUE, ''), mode)\n        if (!lastSubTitle || !(subTitle.start === lastSubTitle.start && subTitle.end === lastSubTitle.end)) {\n          lastSubTitle = subTitle\n          let group = null\n          if (groupCount % MAX_COUNT === 0) {\n            group = {\n              start: lastSubTitle.start,\n              end: lastSubTitle.end,\n              list: []\n            }\n            group.list.push(lastSubTitle)\n            retData.push(group)\n          } else {\n            group = retData[retData.length - 1]\n            group.end = lastSubTitle.end\n            group.list.push(lastSubTitle)\n          }\n          groupCount++\n        } else {\n          try {\n            const { text, textTag, style } = lastSubTitle\n            text.push(subTitle.text[0])\n            textTag.push(subTitle.textTag[0])\n            style.push(subTitle.style[0])\n          } catch (error) {\n            console.error(error)\n          }\n        }\n      }\n      i++\n    }\n    return {\n      list: retData,\n      style: {}\n    }\n  }\n\n  static parseVTTStyle (str, style) {\n    const arr = str.split(':')\n    if (arr.length > 1) {\n      const keyArr = arr[0].trim().split('-')\n      let key = ''\n      if (keyArr.length > 1) {\n        keyArr.map((item, index) => {\n          key += index === 0 ? item : item.charAt(0).toUpperCase() + item.slice(1)\n        })\n      } else {\n        key = keyArr[0]\n      }\n      style[key] = arr[1].trim().replace(/;$/, '')\n    }\n    return style\n  }\n\n  static parseVTT (str) {\n    str = str.replace(VTT_CHECK, '')\n    const arr = str.split('\\n')\n    const retData = []\n    let i = 0\n    let groupCount = 0\n    let lastSubTitle = null\n    // let lastTime = null\n    let isLastSpace = false\n    let isCueStart = false\n    let styleInfo = null\n    let styleHeader = null\n    const styles = []\n    while (i < arr.length) {\n      const str = getByIndex(i, arr).trim()\n      if (!str || (isLastSpace && isNumber(str))) {\n        isLastSpace = !str\n      } else if (VTT_CUE.test(str) && VTT_STYLE.test(getByIndex(i - 1, arr).trim())) {\n        isCueStart = true\n        const cueMatch = /\\((.+?)\\)/g.exec(str)\n        if (!cueMatch) {\n          styleHeader = ''\n        } else {\n          styleHeader = cueMatch[1]\n        }\n        styleInfo = ''\n      } else if (isCueStart) {\n        if (VTT_CUEND.test(str)) {\n          styles.push({\n            key: styleHeader,\n            style: styleInfo\n          })\n          styleInfo = null\n          styleHeader = null\n          isCueStart = false\n        } else {\n          // console.log('parseVTTStyle', str)\n          // this.parseVTTStyle(str, styles)\n          styleInfo += str\n        }\n      } else if (str) {\n        isLastSpace = false\n        const time = this.checkIsTime(arr[i])\n        if (time) {\n          const subTitle = this.parseVttTime(time)\n          if (!lastSubTitle || !(subTitle.start === lastSubTitle.start && subTitle.end === lastSubTitle.end)) {\n            lastSubTitle = subTitle\n            lastSubTitle.text = []\n            lastSubTitle.textTag = []\n            let group = null\n            if (groupCount % MAX_COUNT === 0) {\n              group = {\n                start: lastSubTitle.start,\n                end: lastSubTitle.end,\n                list: []\n              }\n              group.list.push(lastSubTitle)\n              retData.push(group)\n            } else {\n              group = retData[retData.length - 1]\n              group.end = lastSubTitle.end\n              group.list.push(lastSubTitle)\n            }\n            groupCount++\n          }\n        } else {\n          if (lastSubTitle) {\n            const { text, textTag } = lastSubTitle\n            const ret = this.parseVttText(arr[i])\n            /**\n                         * 兼容多种方式的多语言字幕\n                         * demo1 每个语言独立时间标记\n                         * =============================\n                         * 00:00:06.470 --> 00:00:06.890\n                         * Hello,\n                         * 00:00:06.470 --> 00:00:06.890\n                         * 你好，\n                         * =============================\n                         *\n                         * demo2 多个语言公用一个时间标记，由尖括号组成的tag包裹\n                         * =============================\n                         * <cmn-Hans-CN>你好，</cmn-Hans-CN>\n                         * <eng-US>hello,</eng-US>\n                         * =============================\n                         */\n            // if (textTag.length === 0 || lastTime || (ret.tag && ret.tag !== textTag[textTag.length - 1])) {\n            //   text.push(ret.text)\n            //   textTag.push(ret.tag)\n            // } else {\n            //   text[textTag.length - 1] += ret.text\n            // }\n            text.push(ret.text)\n            textTag.push(ret.tag)\n          }\n        }\n        // lastTime = time\n        isLastSpace = false\n      }\n      i++\n      continue\n    }\n    return {\n      list: retData,\n      styles: styles\n    }\n  }\n\n  static checkIsTime (str) {\n    str = str.replace(/\\s+/g, '')\n    let i = 0\n    let match = null\n    while (i < TIME_REGEX_LIST.length) {\n      match = TIME_REGEX_LIST[i].exec(str)\n      if (match) {\n        break\n      }\n      i++\n    }\n    return match ? match[0] : null\n  }\n\n  static parseVttText (text) {\n    // 检测是否有语言标记包裹\n    const langMatch = /^(<?.+?>)/g.exec(text)\n    let retText = ''; let tag = 'default'\n    if (langMatch) {\n      // eslint-disable-next-line no-useless-escape\n      tag = langMatch[0].replace(/\\<|\\>|\\&/g, '')\n      // 动态构造语言匹配规则\n      // eslint-disable-next-line no-useless-escape\n      const newReg = RegExp(`^<${tag}>(([\\\\s\\\\S])*?)<\\/${tag}>$`)\n      const textMatch = newReg.exec(text)\n      if (textMatch) {\n        retText = textMatch[1]\n      } else {\n        retText = text\n        tag = ''\n      }\n    } else {\n      retText = text\n    }\n    const tagsReg = /<(\\w+).(\\w+)>/g\n    let re = tagsReg.exec(retText)\n    // console.log(' re[0]', re)\n    while (re && re.length > 2) {\n      // const tags = re[0].split('.')\n      retText = retText.replace(re[0], `<${re[1]} class=\"${re[2]}\">`)\n      re = tagsReg.exec(retText)\n    }\n    return {\n      tag: tag,\n      text: htmlEncodeAll(retText.replace(/\\\\n+/g, '<br/>'))\n    }\n  }\n\n  static parseVttTime (str) {\n    const arr = str.split('-->')\n    let start; let end = 0\n    if (arr.length === 2) {\n      const aArr = arr[0].split(':')\n      const bArr = arr[1].split(':')\n      start = getSecond(aArr)\n      end = getSecond(bArr)\n    }\n    return {\n      start,\n      end,\n      time: str\n    }\n  }\n\n  static isVTT (str) {\n    return VTT_CHECK.test(str)\n  }\n\n  static isASS (str) {\n    return ASS_CHECK.test(str)\n  }\n\n  static checkFormat (str) {\n    if (!str) {\n      return null\n    }\n    if (VTT_CHECK.test(str)) {\n      return 'vtt'\n    } else if (ASS_CHECK.test(str)) {\n      return 'ass'\n    }\n    return null\n  }\n}\n","const ERROR = [{\n  code: 0, // 切换成功\n  msg: 'SUCCESS'\n}, {\n  code: 1, // 下载错误\n  msg: 'LOAD_ERROR'\n}, {\n  code: 2, // 解析错误\n  msg: 'PARSER_ERROR'\n}, {\n  code: 3, // 格式不支持\n  msg: 'FORMAT_NOT_SUPPORTED'\n},\n{\n  code: 4, // id或者语言不存在\n  msg: 'ID_OR_LANGUAGE_NOT_EXIST'\n}, {\n  code: 5, // 参数错误\n  msg: 'PARAMETERS_ERROR'\n}, {\n  code: 6, // 操作中断\n  msg: 'ABORT'\n}, {\n  code: 7, // 未知错误\n  msg: 'UNKNOWN'\n}, {\n  code: 8, // url不存在\n  msg: 'DATA_ERROR:subtitle.url is null'\n}, {\n  code: 9, // url不存在\n  msg: 'DATA_ERROR:subtitle.url length is 0'\n}]\n\n\nexport function _ERROR (code, error = {}) {\n  const ret = {\n    code: ERROR[code].code,\n    msg: ERROR[code].msg\n  }\n  Object.keys(error).map(key => {\n    ret[key] = error[key]\n  })\n  return ret\n}","class XHR {\n  constructor ({ url, method = 'GET', type = 'arraybuffer', timeout = 10000, data = {} } = {}, context = {}) {\n    return new Promise((resolve, reject) => {\n      const R = new window.XMLHttpRequest()\n      const _method = method.toUpperCase()\n      const _data = []\n      if (type) {\n        R.responseType = type\n      }\n      if (timeout) {\n        R.timeout = timeout\n      }\n      Object.keys(data).forEach(k => {\n        _data.push(`k=${data[k]}`)\n      })\n      R.onload = () => {\n        if (R.status === 200 || R.status === 206) {\n          resolve({ context, res: R })\n        } else {\n          reject(new Error({ context, res: R, type: 'error' }))\n        }\n      }\n      R.onerror = e => {\n        reject(new Error({ context, res: R, type: 'error' }))\n      }\n      R.ontimeout = e => {\n        reject(new Error({ context, res: R, type: 'error' }))\n      }\n      R.onabort = () => {\n        reject(new Error({ context, res: R, type: 'error' }))\n      }\n\n      if (_method === 'GET') {\n        // R.withCredentials = true;\n        R.open(_method, `${url}`)\n        R.send()\n      } else if (_method === 'post') {\n        R.open(_method, url)\n        R.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')\n        R.send(_data.join('&'))\n      } else {\n        throw new Error(`xhr ${_method} is not supported`)\n      }\n    })\n  }\n}\n\nexport default XHR\n","\nexport default class ProxyPromise {\n  constructor () {\n    let resolvePromise\n    let rejectPromise\n\n    const promise = new Promise((resolve, reject) => {\n      resolvePromise = resolve\n      rejectPromise = reject\n    })\n\n    const publicPromise = promise\n    publicPromise.resolve = function (data) {\n      resolvePromise(data)\n      publicPromise.state = 'fulfilled'\n    }\n    publicPromise.reject = function (error) {\n      rejectPromise(error)\n      publicPromise.state = 'rejected'\n      publicPromise.isBreak = error === 'DESTROYED'\n    }\n    publicPromise.state = 'pending'\n\n    return publicPromise\n  }\n\n  /** @param {T=} value */\n  resolve (value) {}\n\n  /** @param {*=} reason */\n  reject (reason) {}\n}\n","import SubTitleParser from './parser'\nimport { _ERROR } from './error'\nimport XHR from './xhr'\nimport ProxyPromise from './proxyPromise'\n\nexport function hasClass (el, className) {\n  if (!el) {\n    return false\n  }\n  if (el.classList) {\n    return Array.prototype.some.call(el.classList, item => item === className)\n  } else {\n    const orgClassName = el.className && typeof el.className === 'object' ? el.getAttribute('class') : el.className\n    return orgClassName && !!orgClassName.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\n  }\n}\n\nexport function addClass (el, className) {\n  if (!el) {\n    return\n  }\n\n  if (el.classList) {\n    className.replace(/(^\\s+|\\s+$)/g, '').split(/\\s+/g).forEach(item => {\n      item && el.classList.add(item)\n    })\n  } else if (!hasClass(el, className)) {\n    if (el.className && typeof el.className === 'object') {\n      el.setAttribute('class', el.getAttribute('class') + ' ' + className)\n    } else {\n      el.className += ' ' + className\n    }\n  }\n}\n\nexport function removeClass (el, className) {\n  if (!el) {\n    return\n  }\n  if (el.classList) {\n    className.split(/\\s+/g).forEach(item => {\n      el.classList.remove(item)\n    })\n  } else if (hasClass(el, className)) {\n    className.split(/\\s+/g).forEach(item => {\n      const reg = new RegExp('(\\\\s|^)' + item + '(\\\\s|$)')\n      if (el.className && typeof el.className === 'object') {\n        el.setAttribute('class', el.getAttribute('class').replace(reg, ' '))\n      } else {\n        el.className = el.className.replace(reg, ' ')\n      }\n    })\n  }\n}\n\nexport function findIndexByTime (currentTime, list, index) {\n  const len = list.length\n  if (len < 1) {\n    return -1\n  }\n  index = index < 0 ? 0 : (index >= len ? len - 1 : index)\n  if (list[index].start <= currentTime && currentTime < list[index].end) {\n    return index\n  } else {\n    let i = list[index].end <= currentTime ? index + 1 : 0\n    for (; i < len; i++) {\n      if (list[i].start <= currentTime && currentTime < list[i].end) {\n        return i\n      } else if (currentTime > list[i].end && i + 1 < len && currentTime < list[i + 1].start) {\n        return -1\n      } else if (currentTime > list[i].end && i + 1 >= len) {\n        return -1\n      }\n    }\n    return -1\n  }\n}\n\nexport function findCIndexByTime (currentTime, list, index) {\n  const len = list.length\n  if (len < 1) {\n    return []\n  }\n  index = index < 0 ? 0 : (index >= len ? len - 1 : index)\n  const ids = []\n  if (index < len) {\n    let i = list[index].end <= currentTime ? index : 0\n    for (; i < len; i++) {\n      if (list[i].start <= currentTime && currentTime < list[i].end) {\n        ids.push(i)\n      }\n      if (currentTime < list[i].start) {\n        break\n      }\n    }\n  }\n  // console.log('findCIndexByTime', ids)\n  return ids\n}\n\n/**\n * @description 根据索引从列表中删除某个选项\n * @param {Array<any>} list\n * @param {number} gid 一级存储索引\n * @param {number} cid 二级存储索引\n */\nexport function removeItemByIndex (list, gid, cid) {\n  if (list.length === 0 || gid < 0 || gid > list.length - 1) {\n    return\n  }\n  const gList = list[gid].list\n  if (gList.length === 0) {\n    list.splice(gid, 1)\n    return\n  }\n  if (cid < 0 || cid > gList.length - 1) {\n    return\n  }\n  gList.splice(cid, 1)\n}\n\nexport function getItemsByIndex (list, gid, cids) {\n  if (list.length === 0 || gid < 0 || gid > list.length - 1) {\n    return []\n  }\n  const gList = list[gid].list\n\n  if (cids.length === 0) {\n    return []\n  }\n\n  const ret = gList.splice(cids[0], cids.length)\n\n  // 删除当前获取项之前的数据\n  if (gid > 0) {\n    list.splice(0, gid)\n  }\n  if (gList.length === 0) {\n    list.splice(0, 1)\n  }\n\n  return ret\n}\n\nexport function typeOf (obj) {\n  // eslint-disable-next-line no-lookahead-lookbehind-regexp/no-lookahead-lookbehind-regexp\n  return Object.prototype.toString.call(obj).match(/([^\\s.*]+)(?=]$)/g)[0]\n}\n\n/**\n *\n * @param { string } el\n * @param { string } [tpl=]\n * @param { {[propName: string]: any }} [attrs={}]\n * @param { string } [cname='']\n * @returns { HTMLElement | null }\n */\nexport function createDom (el = 'div', tpl = '', attrs = {}, cname = '') {\n  const dom = document.createElement(el)\n  dom.className = cname\n  dom.innerHTML = tpl\n  Object.keys(attrs).forEach(item => {\n    const key = item\n    const value = attrs[item]\n    if (el === 'video' || el === 'audio' || el === 'live-video') {\n      if (value) {\n        dom.setAttribute(key, value)\n      }\n    } else {\n      dom.setAttribute(key, value)\n    }\n  })\n  return dom\n}\n\nexport function isMobile () {\n  const ua = navigator.userAgent\n  const isWindowsPhone = /(?:Windows Phone)/.test(ua)\n  const isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone\n  const isAndroid = /(?:Android)/.test(ua)\n  const isFireFox = /(?:Firefox)/.test(ua)\n  const isTablet = /(?:iPad|PlayBook)/.test(ua) || (isAndroid && !/(?:Mobile)/.test(ua)) || (isFireFox && /(?:Tablet)/.test(ua))\n  const isPhone = /(?:iPhone)/.test(ua) && !isTablet\n  return isPhone || isAndroid || isSymbian || isTablet\n}\n\nexport function addCSS (styles, preTag = '') {\n  let cssText = ''\n  styles.map(item => {\n    cssText += ` ${preTag} ${item.key} {${item.style}}`\n  })\n  const styleTag = document.createElement('style') // 创建一个style元素\n  const head = document.head || document.getElementsByTagName('head')[0] // 获取head元素\n  styleTag.type = 'text/css' // 这里必须显示设置style元素的type属性为text/css，否则在ie中不起作用\n  styleTag.id = 'ssss'\n  if (styleTag.styleSheet) { // IE\n    const func = function () {\n      try { // 防止IE中stylesheet数量超过限制而发生错误\n        styleTag.styleSheet.cssText = cssText\n      } catch (e) {\n\n      }\n    }\n    // 如果当前styleSheet还不能用，则放到异步中则行\n    if (styleTag.styleSheet.disabled) {\n      setTimeout(func, 10)\n    } else {\n      func()\n    }\n  } else { // w3c\n    // w3c浏览器中只要创建文本节点插入到style元素中就行了\n    const textNode = document.createTextNode(cssText)\n    styleTag.appendChild(textNode)\n  }\n  head.appendChild(styleTag) // 把创建的style元素插入到head中\n}\n\nexport function parseResult (textTrack, resolve, reject, data, error) {\n  if (error) {\n    const err = _ERROR(2, error)\n    reject(err, { format: data.format })\n  } else if (!data.format) {\n    const err = _ERROR(3)\n    reject(err)\n  } else {\n    textTrack.list = data.list\n    textTrack.format = data.format\n    textTrack.styles = data.styles\n    resolve(textTrack)\n  }\n}\n\nexport function parse (content, format, promise) {\n  if (!promise) {\n    promise = new ProxyPromise()\n  }\n\n  // json类型，直接格式化json并解析数据\n  if (format === 'json') {\n    const list = SubTitleParser.parseJson(content)\n    promise.resolve({\n      list,\n      format: 'json'\n    })\n  } else if (format === 'string') {\n    SubTitleParser.parse(content, (data, error) => {\n      if (error) {\n        const err = _ERROR(2, error)\n        promise.reject(err, { format: data.format})\n      } else if (!data.format) {\n        const err = _ERROR(3)\n        promise.reject(err)\n      } else {\n        promise.resolve({\n          styles: data.styles,\n          list: data.list,\n          format: data.format\n        })\n      }\n    })\n  }\n  return promise\n}\n\nexport function loadSubTitle (object, promise) {\n  if (!promise) {\n    promise = new ProxyPromise()\n  }\n  new XHR({ url: object.url, type: 'text' }).then(data => {\n    parse(data.res.response, 'string').then((data) => {\n      promise.resolve({\n        ...data,\n        ...object\n      })\n    }).catch(e => {\n      promise.reject(e)\n    })\n  }).catch(err => {\n    const _err = _ERROR(1, { statusText: err.statusText, status: err.status, type: err.type, message: 'http load error', url: object.src, ...object })\n    promise.reject(_err)\n  })\n  return promise\n}\n\n/**\n * 加载字幕\n * @param {*} textTrack\n * @param {string} 类型\n */\nexport function __loadText (textTrack, type) {\n  return new Promise((resolve, reject) => {\n    if (textTrack.list) {\n      resolve(textTrack)\n      return\n    }\n    // json类型，直接格式化json并解析数据\n    if (textTrack.json) {\n      const list = SubTitleParser.parseJson(textTrack.json)\n      textTrack.list = list\n      textTrack.format = 'json'\n      resolve(textTrack)\n      return\n    }\n\n    // text string类型，直接解析文本信息\n    if (textTrack.stringContent && !textTrack.url) {\n      SubTitleParser.parse(textTrack.stringContent, (data, error) => {\n        parseResult(textTrack, resolve, reject, data, error)\n      })\n    } else if (!textTrack.url) {\n      const _err = _ERROR(8)\n      reject(_err)\n    } else {\n      new XHR({ url: textTrack.url, type: 'text' })\n        .then(data => {\n          SubTitleParser.parse(data.res.response, (data, error) => {\n            console.log('SubTitleParser.parse data', data)\n            parseResult(textTrack, resolve, reject, data, error)\n          })\n        }).catch(err => {\n          const _err = _ERROR(1, { statusText: err.statusText, status: err.status, type: err.type, message: 'http load error', url: textTrack.url })\n          reject(_err)\n        })\n    }\n  })\n}\n\n/**\n * 切换的语言和当前的是否一致\n * @param {*} src\n * @param {*} dist\n * @returns\n */\nexport function checkSubtitle (src, dist) {\n  if ((src.id && dist.id && src.id === dist.id) || (src.language && dist.language && src.language === dist.language)) {\n    return true\n  }\n  return false\n}\n\nexport function isEnglish (str) {\n  // 判断字符串是否为空\n  if (str === null || str.trim() === '') {\n    return false\n  }\n  // 判断字符串是否为纯英文\n  return /^[a-zA-Z]+$/.test(str)\n}\n/**\n * 检测是否是半角标点符号\n * @param {*} str\n * @returns\n */\nexport function patchABCbiaodian (str) {\n  const reg = /[\\x21-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7B-\\x7F]/\n  if (reg.test(str)){\n    return true\n  } else {\n    return false\n  }\n}\n/**\n * 检测是否是中文标点符号\n * @param {*} temp\n * @returns\n */\nexport function patchCn (temp) {\n  const reg = /[\\u3002|\\uff1f|\\uff01|\\uff0c|\\u3001|\\uff1b|\\uff1a|\\u201c|\\u201d|\\u2018|\\u2019|\\uff08|\\uff09|\\u300a|\\u300b|\\u3008|\\u3009|\\u3010|\\u3011|\\u300e|\\u300f|\\u300c|\\u300d|\\ufe43|\\ufe44|\\u3014|\\u3015|\\u2026|\\u2014|\\uff5e|\\ufe4f|\\uffe5]/\n  if (reg.test(temp)){\n    return true\n  } else {\n    return false\n  }\n}\n\nexport function splitWords (str) {\n  const arr = str.split('')\n  const retArr = []\n  let lastIsEn = false\n  for (let i = 0; i < arr.length; i++) {\n    const _str = arr[i]\n    if (isEnglish(_str)) {\n      if (!lastIsEn) {\n        retArr.push(_str)\n        lastIsEn = true\n      } else {\n        const _lIdx = retArr.length - 1\n        retArr[_lIdx] = `${retArr[_lIdx]}${_str}`\n      }\n    } else if (_str.match(/^[ ]*$/) || patchABCbiaodian(_str) || patchCn(_str)){\n      lastIsEn = false\n      const _lIdx = retArr.length - 1\n      retArr[_lIdx] = `${retArr[_lIdx]}${_str}`\n    } else {\n      lastIsEn = false\n      retArr.push(_str)\n    }\n  }\n  return retArr\n}","class ResizeObserver {\n  constructor () {\n    this.__handlers = []\n    if (!window.ResizeObserver) {\n      return\n    }\n    this.observer = new window.ResizeObserver((entries) => {\n      // const t = new Date().getTime()\n      this.__trigger(entries)\n    })\n  }\n\n  addObserver (target, handler) {\n    if (!this.observer) {\n      return\n    }\n    this.observer && this.observer.observe(target)\n    const { __handlers } = this\n    let index = -1\n    for (let i = 0; i < __handlers.length; i++) {\n      if (__handlers[i] && target === __handlers[i].target) {\n        index = i\n      }\n    }\n    if (index > -1) {\n      this.__handlers[index].handler.push(handler)\n    } else {\n      this.__handlers.push({\n        target,\n        handler: [handler]\n      })\n    }\n  }\n\n  unObserver (target) {\n    let i = -1\n    this.__handlers.map((item, index) => {\n      if (target === item.target) {\n        i = index\n      }\n    })\n    this.observer && this.observer.unobserve(target)\n    i > -1 && this.__handlers.splice(i, 1)\n  }\n\n  destroyObserver () {\n    this.observer && this.observer.disconnect()\n    this.observer = null\n    this.__handlers = null\n  }\n\n  __runHandler (target, cr) {\n    const { __handlers } = this\n    for (let i = 0; i < __handlers.length; i++) {\n      if (__handlers[i] && target === __handlers[i].target) {\n        __handlers[i].handler && __handlers[i].handler.forEach(handler => {\n          try {\n            handler(target, cr)\n          } catch (error) {\n            console.error(error)\n          }\n        })\n        break\n      }\n    }\n  }\n\n  __trigger (entries) {\n    entries.map(item => {\n      const cr = item.contentRect\n      this.__runHandler(item.target, cr)\n    })\n  }\n}\n\nlet resizeObserver = null\n\nfunction addObserver (target, handler) {\n  if (!resizeObserver) {\n    resizeObserver = new ResizeObserver()\n  }\n  resizeObserver.addObserver(target, handler)\n}\n\nfunction unObserver (target, handler) {\n  if (!resizeObserver) {\n    return\n  }\n  resizeObserver.unObserver(target, handler)\n}\n\nfunction destroyObserver (target, handler) {\n  if (!resizeObserver) {\n    return\n  }\n  resizeObserver.destroyObserver(target, handler)\n  resizeObserver = null\n}\n\nexport {\n  addObserver,\n  unObserver,\n  destroyObserver\n}\n","\nexport const EVENTS = {\n  RESIZE: 'resize',\n  CHANGE: 'change',\n  OFF: 'off',\n  UPDATE: 'update'\n}","import EventEmitter from 'eventemitter3'\n// import XHR from './xhr'\n// import SubTitleParser from './parser'\n// import { addClass, removeClass, typeOf, findIndexByTime, findCIndexByTime, isMobile, addCSS, createDom, __loadText, checkSubtitle } from './utils'\nimport * as Util from './utils'\nimport { addObserver, unObserver } from './observer'\nimport { EVENTS } from './constants'\nimport { _ERROR } from './error'\nimport ProxyPromise from './proxyPromise'\n\nimport './style/index.scss'\n\n\n/**\n * @typedef { {\n *   label?: string, // 字幕标记\n *   language?: string, // 字幕语言\n *   id?: string | number, // 字幕id\n *   isDefault?: boolean, // 当前字幕是不是默认字幕\n *   url?: string,\n *   stringContent?: string,\n *   list: any[]\n * } } SubtitleItem\n */\n\n// eslint-disable-next-line no-unused-vars\nconst SubtitleItem = {\n  label: '', // 字幕标记\n  language: '', // 字幕语言\n  id: '', // 字幕id\n  isDefault: false, // 当前字幕是不是默认字幕\n  json: {},\n  url: '', // 字幕的url地址\n  stringContent: '', // 响应格式的字符串，可以是vtt格式或者ass格式\n  list: [] // json格式\n}\n\nfunction formatUrl (url) {\n  const ret = []\n  if (url && Util.typeOf(url) === 'String') {\n    ret.push({ url: url, index: 0, start: -1, end: -1})\n  } else if (Util.typeOf(url) === 'Array') {\n    url.forEach((item, i) => {\n      ret.push({\n        url: item.url || item.src,\n        index: i,\n        start: item.start || -1,\n        end: item.end || -1\n      })\n    })\n  }\n  return ret\n}\n\nlet IS_MOBILE = false\nexport default class Subtitle extends EventEmitter {\n  /**\n   * @type {string}\n   * @description the version of sdk\n   */\n  get version () {\n    return __VERSION__\n  }\n\n  constructor (options) {\n    super()\n    IS_MOBILE = Util.isMobile()\n    this.currentText = null // 当前字幕信息\n    this.currentExtText = null\n    this.textTrack = [] // 字幕列表\n    this._cid = -1 //  当前字幕索引\n    this._gid = -1 // 当前字幕组索引\n    this._cids = []\n    this._iId = null\n    this._iC = 0\n    this.player = null\n    this.root = null\n    this.config = {\n      line: 'double', // 行数\n      bottom: 0, // 底部高度\n      mode: 'stroke',\n      defaultOpen: false, // 是否默认开启\n      baseSizeX: 49, // 横向基准字号\n      baseSizeY: 28, // 竖向基准字号, 宽高比例大于1.2视作竖向视频\n      minSize: 16, // 最小字号\n      minMobileSize: 13, // 移动端兜底字号\n      fitVideo: true, // 是否适配视频画面\n      offsetBottom: 2, // 底部边距百分比\n      fontColor: '#fff', // 字体颜色\n      domRender: true,\n      updateMode: 'vod', // 消费模式，vod 点播 live 直播\n      renderMode: '', // step - 逐字渲染\n      debugger: false\n    }\n\n    this._ctime = 0\n    this._loadingTrack = {}\n    Object.keys(this.config).map(key => {\n      if (options[key] !== undefined && options[key] !== null) {\n        this.config[key] = options[key]\n      }\n    })\n\n    this._isOpen = this.config.defaultOpen || false\n\n    this._videoMeta = {\n      scale: 0,\n      videoHeight: 0,\n      videoWidth: 0,\n      lwidth: 0, // 当前容器宽度\n      lheight: 0, // 当前容器高度\n      vWidth: 0, // 视频画面实际宽度\n      vHeight: 0, // 视频画面实际高度\n      vBottom: 0, // 视频画面底部距离\n      vLeft: 0, // 视频画面左边距离\n      marginBottom: 0 // 字幕底部边距\n    }\n    if (!options.subTitles || Util.typeOf(options.subTitles) !== 'Array') {\n      return\n    }\n    if (options.player) {\n      this.attachPlayer(options.player)\n    }\n    this.seiTime = 0\n    this.lastSeiTime = 0\n    this._curTexts = []\n    this._curRenderTask = []\n    this._renderIntervalId = -1\n    this._lastTimeStamp = -1\n    this.setSubTitles(options.subTitles, this.config.defaultOpen)\n  }\n\n\n  /**\n   * @description 更新字幕列表\n   * @param {*} subTitles // 更新的字幕列表\n   * @param {*} isOpen  // 是否默认开启\n   * @param {*} ieRemoveFirst // 是否移除之前的数据\n   */\n  setSubTitles (subTitles = [], isOpen = false, ieRemoveFirst = true) {\n    const _isOpen = this._isOpen || isOpen\n    ieRemoveFirst && this.innerRoot && this.switchOff()\n    this.currentText = null\n    this.textTrack = []\n    subTitles.forEach(item => {\n      const text = {}\n      Object.keys(item).map(key => {\n        text[key] = item[key]\n      })\n      text.url = formatUrl(text.url)\n      if (text.isDefault) {\n        this.currentText = text\n      }\n      this.textTrack.push(text)\n    })\n    this._log('setSubTitles', _isOpen)\n    if (_isOpen) {\n      this.switch().catch(e => {\n        this._log('[switch]', e)\n      })\n    }\n    this.currentText && this._loadTrack(this.currentText).then((textTrack) => {\n      this.addStyles(textTrack)\n      // if (_isOpen) {\n      //   this.switch()\n      // }\n    })\n    this.emit('reset', {list: this.textTrack, isOpen: _isOpen})\n  }\n\n  /**\n   * @description 更新更新单个语言数据\n   * @param {*} subTitle\n   */\n  updateSubTitle (subTitle) {\n    let index = -1\n    for (let i = 0; i < this.textTrack.length; i++) {\n      if (Util.checkSubtitle(subTitle, this.textTrack[i])) {\n        index = i\n        break\n      }\n    }\n    this._log('updateSubTitle', index, subTitle)\n    if (index > -1) {\n      const _isCurrent = Util.checkSubtitle(this.currentText, this.textTrack[index])\n      this._log('updateSubTitle', '_isCurrent', _isCurrent, 'this.isOpen', this.isOpen, this.currentText)\n      if (!_isCurrent) {\n        return\n      }\n      const url = formatUrl(subTitle.url)\n      if (!this.isOpen) {\n        this.textTrack[index].url = url\n      } else {\n        url.forEach(item => {\n          this.textTrack[index].url.push(item)\n        })\n        this._log('updateSubTitle _loadTrackUrls', this.textTrack[index])\n        this._loadTrackUrls(this.currentText, 2)\n      }\n    }\n  }\n\n  addStyles (textTrack) {\n    const { styles, format } = textTrack\n    if (styles && format === 'vtt') {\n      styles.map(item => {\n        if (!item.key) {\n          item.key = 'xg-text-track-span'\n        }\n      })\n      Util.addCSS(styles, 'xg-text-track')\n    }\n  }\n\n  attachPlayer (player) {\n    this._log('attachPlayer')\n    if (!player) {\n      return\n    }\n    if (this.player) {\n      this.detachPlayer()\n    }\n    const { fontColor, mode, fitVideo, domRender } = this.config\n    this.player = player\n    if (domRender) {\n      this.root = document.createElement('xg-text-track')\n      this.root.className = 'xg-text-track'\n      !this._isOpen && Util.addClass(this.root, 'text-track-hide')\n      !fitVideo && Util.addClass(this.root, 'text-track-no-fitvideo')\n      mode && Util.addClass(this.root, `text-track-${mode}`)\n      this.innerRoot = document.createElement('xg-text-track-inner')\n      this.root.appendChild(this.innerRoot)\n      if (fontColor) {\n        this.root.style.color = fontColor\n      }\n      if (this.currentText) {\n        ['language', 'id', 'label'].map(key => {\n          this.root.setAttribute(`data-${key}`, this.currentText[key] || '')\n        })\n      }\n      this.player.root.appendChild(this.root)\n      addObserver(player.root, this._onResize)\n    }\n    this.player.on('destroy', this.destroy)\n    this.player.on('timeupdate', this._onTimeupdate)\n    this.player.on('pause', this._onPause)\n    this.player.on('play', this._onPlay)\n    this.player.on('core_event', this._onCoreEvents)\n    if (this._isOpen) {\n      this.switch().catch(e => {\n        this._log('[switch]', e)\n      })\n    }\n  }\n\n  detachPlayer () {\n    const { player, config } = this\n    if (!player) {\n      return\n    }\n    player.off('destroy', this.destroy)\n    player.off('timeupdate', this._onTimeupdate)\n    player.off('pause', this._onPause)\n    player.off('play', this._onPlay)\n    player.off('core_event', this._onCoreEvents)\n    if (config.domRender) {\n      if (player.root) {\n        unObserver(player.root, this._onResize)\n        player.root.removeChild(this.root)\n      }\n      this.innerRoot = null\n      this.root = null\n    }\n    this.player = null\n  }\n\n  switch (subtitle = { id: '', language: '' }) {\n    this._log('switch', subtitle)\n    this._loadingTrack = subtitle\n    return new Promise((resolve, reject) => {\n      // 无参数的情况下直接开启字幕\n      if (!subtitle.id && !subtitle.language) {\n        if (this.currentText) {\n          this._loadingTrack = {}\n          this._updateCurrent(this.currentText)\n          this.switchOn()\n          const err = _ERROR(0, { message: 'switch default subtitle success' })\n          resolve(err)\n          return\n        } else {\n          const err = _ERROR(5, { message: 'no default subtitle' })\n          reject(err)\n          return\n        }\n      }\n      // console.log('isCurrent', this.currentText && Util.checkSubtitle(subtitle, this.currentText))\n      if (this.currentText && Util.checkSubtitle(subtitle, this.currentText)) {\n        this._loadingTrack = {}\n        this._updateCurrent(this.currentText)\n        this.switchOn()\n        resolve(_ERROR(0))\n      } else {\n        let nextSubtitle = null\n        // 语言不同移除当前字幕\n        this.__removeByTime(this._curTexts, 0)\n        for (let i = 0; i < this.textTrack.length; i++) {\n          if (Util.checkSubtitle(subtitle, this.textTrack[i])) {\n            nextSubtitle = this.textTrack[i]\n            break\n          }\n        }\n        this._log('nextSubtitle', nextSubtitle)\n        if (nextSubtitle) {\n          this._emitPlayerSwitch(this.currentText, nextSubtitle)\n          if (nextSubtitle.list) {\n            this._loadingTrack = {}\n            this._updateCurrent(nextSubtitle)\n            this.switchOn()\n            resolve(_ERROR(0))\n          } else {\n            this._log('this._loadTrack', nextSubtitle)\n            this._updateCurrent(nextSubtitle)\n            this._loadTrack(nextSubtitle)\n              .then((textTrack) => {\n                this.addStyles(textTrack)\n                // 比对最近一次的信息\n                if (this._loadingTrack.id === nextSubtitle.id || this._loadingTrack.language === textTrack.language) {\n                  this._loadingTrack = {}\n                  this._updateCurrent(textTrack)\n                  this.switchOn()\n                  resolve(_ERROR(0))\n                } else {\n                  const err = _ERROR(6, { message: `check _loadingTrack fail id: ${this._loadingTrack.id}  nextSubtitle:${textTrack.id}` })\n                  // console.trace(err)\n                  reject(err)\n                }\n              }).catch(err => {\n                reject(err)\n              })\n          }\n        } else {\n          const err = _ERROR(4, new Error(`The is no subtitle with id:[{${subtitle.id}}] or language:[${subtitle.language}]`))\n          // console.trace(err)\n          reject(err)\n        }\n      }\n    })\n  }\n\n  /**\n   * 开启扩展字幕\n   * @param {{\n   *   id?: any,\n   *   language?: any\n   * }} subtitle\n   * @returns\n   */\n  switchExt (subtitle = { id: '', language: '' }) {\n    return new Promise((resolve, reject) => {\n      if (!subtitle.id && !subtitle.language) {\n        this.currentExtText = null\n        resolve(_ERROR(0))\n      } else {\n        let nextSubtitle = null\n        for (let i = 0; i < this.textTrack.length; i++) {\n          if (Util.checkSubtitle(subtitle, this.textTrack[i])) {\n            nextSubtitle = this.textTrack[i]\n            break\n          }\n        }\n        if (nextSubtitle && !Util.checkSubtitle(nextSubtitle, this.currentText)) {\n          this._loadTrack(nextSubtitle).then((textTrack) => {\n            this.currentExtText = textTrack\n            resolve(_ERROR(0))\n          })\n        }\n      }\n    })\n  }\n\n  switchOn () {\n    this._log('switchOn')\n    this._isOpen = true\n    this.show()\n    this.emit(EVENTS.CHANGE, this.currentText)\n  }\n\n  /**\n   * 关闭字幕\n   */\n  switchOff () {\n    this._isOpen = false\n    this.hide()\n    this.emit(EVENTS.OFF)\n  }\n\n  get isOpen () {\n    return this._isOpen\n  }\n\n  _log (...msg) {\n    if (this.config.debugger) {\n      console.log('[xgSubtitle]', ...msg)\n    }\n  }\n\n  _loadTrack (textTrack) {\n    this._log('_loadTrack', textTrack.language, textTrack)\n    const promise = new ProxyPromise()\n    let contentType = ''\n    let content = ''\n    if (textTrack.json) {\n      contentType = 'json'\n      content = textTrack.json\n    } else if (textTrack.stringContent && !textTrack.url) {\n      contentType = 'string'\n      content = textTrack.stringContent\n    }\n    if (content) {\n      Util.parse(content, contentType).then(data => {\n        textTrack.format = data.format\n        textTrack.styles = data.styles\n        textTrack.list = data.list\n        promise.resolve(textTrack)\n      }).catch(e=>{\n        promise.reject(e)\n      })\n      return promise\n    }\n\n    const urls = textTrack.url\n    if (urls.length === 0){\n      promise.resolve(textTrack)\n      return promise\n    }\n    const url = urls.splice(0,1)\n    Util.loadSubTitle(url[0]).then((data) => {\n      textTrack.format = data.format\n      textTrack.styles = data.styles\n      if (!textTrack.list) {\n        textTrack.list = []\n      }\n      this._pushList(textTrack.list, data.list)\n      urls.length > 1 && this._loadTrackUrls(textTrack, 2)\n      promise.resolve(textTrack)\n    }).catch(e => {\n      promise.reject(e)\n    })\n    return promise\n  }\n\n  _emitPlayerSwitch (curSubtitle, nextSubTitle) {\n    // 清空当前字幕的列表\n    if (curSubtitle && this.config.updateMode === 'live') {\n      curSubtitle.list = []\n      curSubtitle.url = []\n    }\n    const data = { lang: nextSubTitle.language, ...nextSubTitle}\n    this._log('emit subtile_switch ', nextSubTitle, data)\n    this.player && this.player.emit('switch_subtitle', data)\n  }\n\n  /**\n   * @desc 多文件场景下下载多个vtt文件\n   * @param {*} textTrack\n   * @param {*} maxCount\n   */\n  _loadTrackUrls (textTrack, maxCount, promise) {\n    const len = textTrack.url.length\n    const urls = len > maxCount ? textTrack.url.splice(0, maxCount) : textTrack.url.splice(0, len)\n    let loadingCount = urls.length\n    this._log('_loadTrackUrls', textTrack.language, len, urls.length, loadingCount)\n    urls.forEach((item, i) => {\n      const obj = {\n        ...item,\n        index: i\n      }\n      Util.loadSubTitle(obj).then((data) => {\n        textTrack.format = data.format\n        textTrack.styles = data.format\n        if (!textTrack.list) {\n          textTrack.list = []\n        }\n        this._pushList(textTrack.list, data.list)\n        loadingCount--\n      }).catch((e) => {\n        loadingCount--\n      }).finally(e => {\n        if (loadingCount === 0) {\n          promise && promise.resolve(textTrack)\n          this._loadTrackUrls(textTrack, 2)\n        }\n      })\n    })\n  }\n  /**\n   * @description 移除已经加载过的字幕url信息\n   * @param {*} textTrack\n   * @param {*} data\n   */\n  _freshUrl (textTrack, data = {url: ''}) {\n    let i = -1\n    textTrack.url.forEach((item, index) => {\n      if (item.url === data.url) {\n        i = index\n      }\n    })\n    if (i > -1) {\n      textTrack.url.splice(i, 1)\n    }\n  }\n\n  /**\n   * @desc 在当前的字幕list中插入后续加载到的字幕数据，按照时间分布插入\n   * @param {Array} dist\n   * @param {Array} src\n   * @returns\n   */\n  _pushList (dist, src) {\n    const _start = src[0].start\n    const _end = src[src.length - 1].end\n    if (dist.length === 0 || _start >= dist[dist.length - 1].end) {\n      src.forEach(item => {\n        dist.push(item)\n      })\n    } else {\n      let _index = -1\n      for (let i = 0; i < dist.length; i++) {\n        if (dist[i].start > _end) {\n          _index = i\n          break\n        }\n      }\n      if (_index > -1) {\n        src.forEach((item, i) => {\n          dist.splice(_index + i, 0, item)\n        })\n      }\n    }\n    return dist\n  }\n\n  /**\n   * @private\n   * @description 更新当前生效字幕, 移除原有的渲染\n   * @param {} subtitle\n   * @returns\n   */\n  _updateCurrent (subtitle) {\n    // console.trace('_updateCurrent')\n    this.currentText = subtitle\n    if (this.config.domRender && this.root) {\n      ['language', 'id', 'label'].map(key => {\n        this.root.setAttribute(`data-${key}`, this.currentText[key] || '')\n      })\n      this.__remove(this._cids)\n    }\n    this._cids = []\n    this._gid = -1\n    this._cid = -1\n    this._curTexts = []\n    const curTime = this._getPlayerCurrentTime()\n    curTime && (this.config.updateMode === 'live' ? this._liveUpdate(curTime) : this._update(curTime))\n  }\n\n  __loadAll () {\n    this.textTrack.forEach(item => {\n      this._loadTrack(item)\n    })\n  }\n\n  getDelCid (oldArr, newArr) {\n    const ret = []\n    for (let i = 0; i < oldArr.length; i++) {\n      if (!newArr.includes(oldArr[i])) {\n        ret.push(oldArr[i])\n      }\n    }\n    return ret\n  }\n\n  getNewCid (oldArr, newArr) {\n    const ret = []\n    for (let i = 0; i < newArr.length; i++) {\n      if (!oldArr.includes(newArr[i])) {\n        ret.push(newArr[i])\n      }\n    }\n    return ret\n  }\n\n  /**\n   * @description 实时丢弃型更新, 字幕消费之后自动删除\n   * @param {number} currentTime 当前时间\n   * @returns\n   */\n  _liveUpdate (currentTime) {\n    if (!this.currentText || !this.currentText.list || !this.currentText.list.length) {\n      return\n    }\n    let _cids = []\n    const _gid = Util.findIndexByTime(currentTime, this.currentText.list, this._gid)\n    if (_gid > -1) {\n      _cids = Util.findCIndexByTime(currentTime, this.currentText.list[_gid].list, this._cid)\n    }\n    this.__removeByTime(this._curTexts, currentTime)\n    this._log('_liveUpdate',currentTime, _gid, _cids, this.currentText.list[0].list[0].start, this.currentText.list[0].list[0].end)\n    if (_cids.length > 0) {\n      const ret = Util.getItemsByIndex(this.currentText.list, _gid, _cids)\n      const _len = this._curTexts.length\n      const _si = _len > 0 ? this._curTexts[_len - 1].index : 0\n      ret.forEach((item, i) => {\n        item.index = i + _si\n        this._curTexts.push(item)\n      })\n      this.__render(ret)\n    }\n    this.emit('update', this._curTexts)\n  }\n\n  _update (currentTime) {\n    if (!this.currentText || !this.currentText.list || !this.currentText.list.length) {\n      return\n    }\n    const _gid = Util.findIndexByTime(currentTime, this.currentText.list, this._gid)\n    let _cids = []\n    if (_gid > -1) {\n      _cids = Util.findCIndexByTime(currentTime, this.currentText.list[_gid].list, this._cid)\n    }\n\n    // 当前没有数据，清空\n    if (_cids.length < 1) {\n      this._cids.length > 0 && this.config.domRender && this.__remove(this._cids)\n      this._cids = []\n      return\n    }\n    // 数据没有更新\n    if (this._cids === _cids && _gid === this._gid) {\n      return\n    }\n    this._gid = _gid\n    this._cid = _cids[0]\n\n    // 需要删除的数据\n    const delCids = this.getDelCid(this._cids, _cids)\n\n    // 需要新增的数据\n    const newCids = this.getNewCid(this._cids, _cids)\n\n    this._cids = _cids\n    this.config.domRender && this.__remove(delCids)\n    const texts = []\n    newCids.map(item => {\n      const text = this.currentText.list[_gid].list[item]\n      text.index = item\n      texts.push(text)\n    })\n\n    if (this.currentExtText) {\n      newCids.map(item => {\n        const textExt = this.currentText.list[_gid].list[item]\n        textExt.index = item\n        texts.push(textExt)\n      })\n    }\n    this._log('update', texts, currentTime)\n    this.emit('update', texts)\n    this.__render(texts, currentTime)\n  }\n\n  _getPlayerCurrentTime () {\n    if (!this.player) {\n      return 0\n    }\n    const { currentTime } = this.player\n    // 如果是直播，有sei事件触发，需要对时间做校准\n    const curTime = parseInt(currentTime * 1000 + this.seiTime * 1000 - this.lastSeiTime * 1000, 10) / 1000\n    return curTime\n  }\n\n  _onPause = () => {\n    this.stopRender()\n  }\n\n  _onPlay = () => {\n    if (this._curRenderTask.length > 0) {\n      this.startRender(-1)\n    }\n  }\n\n  _onTimeupdate = () => {\n    if (!this._isOpen) {\n      return\n    }\n    const { videoWidth, videoHeight } = this.player.video\n    if (!this._videoMeta.scale && videoWidth && videoHeight) {\n      this._onResize(this.player.root)\n    }\n    const curTime = this._getPlayerCurrentTime()\n    if (Math.round(Math.abs(curTime * 1000 - this._ctime)) < 200) {\n      return\n    }\n    this._ctime = curTime * 1000\n    if (this.currentText && this.currentText.list) {\n      this.config.updateMode === 'live' ? this._liveUpdate(curTime) : this._update(curTime)\n    }\n  }\n  _onResize = (target) => {\n    const { _videoMeta, config } = this\n    if (!config.domRender) {\n      return\n    }\n    if (!target || !(target instanceof window.Element)) {\n      target = this.player.root\n    }\n    if (this._iId) {\n      clearTimeout(this._iId)\n      this._iId = null\n    }\n    if (!_videoMeta.scale) {\n      if (!this.player.video) {\n        return\n      }\n      const { videoWidth, videoHeight } = this.player.video\n      if (videoWidth && videoHeight) {\n        _videoMeta.videoWidth = videoWidth\n        _videoMeta.videoHeight = videoHeight\n        _videoMeta.scale = parseInt(videoHeight / videoWidth * 100, 10)\n      } else {\n        return\n      }\n    }\n    this.__startResize(target)\n  }\n\n  _onCoreEvents = (e) => {\n    try {\n      switch (e.eventName) {\n        // 字幕更新\n        case 'core.subtitlesegments':\n          this._onSubtitleSegment(e.list || [])\n          break\n        // 字幕列表更新\n        case 'core.subtitleplaylist':\n          this._onSubtitlePlaylist(e.list || [])\n          break\n        // sei 时间更新\n        case 'core.seipayloadtime':\n          this._onCoreSeiintime(e)\n          break\n        default:\n          //\n      }\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  _onSubtitlePlaylist (subtitleList) {\n    this._log('_onSubtitlePlaylist', subtitleList)\n    const list = subtitleList.map(item => {\n      return {\n        label: item.name,\n        language: item.lang, // 字幕语言f\n        id: item.id, // 字幕id\n        isDefault: item.default, // 当前字幕是不是默认字幕\n        url: [], // 字幕的url地址\n        mUrl: item.url\n      }\n    })\n    this.setSubTitles(list)\n  }\n\n  _onSubtitleSegment (urlList) {\n    this._log('_onSubtitleSegment', urlList.length, urlList[0].lang, urlList[0].sn, urlList[urlList.length - 1].sn, urlList[0].start, urlList[urlList.length - 1].end)\n    if (!urlList || urlList.length === 0) {\n      return\n    }\n\n    // 获取语言\n    const lang = urlList[0].lang\n    // 重构数据结构\n    const urls = urlList.map(item => {\n      return {\n        id: item.sn,\n        url: item.url,\n        duration: item.duration,\n        start: item.start,\n        end: item.end\n      }\n    })\n    const _sub = {\n      language: lang,\n      url: urls\n    }\n    // 更新的不是当前语言，不做处理\n    if (!Util.checkSubtitle(_sub, this.currentText)) {\n      return\n    }\n    this.updateSubTitle(_sub)\n  }\n\n  _onCoreSeiintime (e) {\n    try {\n      const sei = e.time / 1000\n      this._log('_onCoreSeiintime sei', sei, this.seiTime, this.lastSeiTime)\n      this.seiTime = sei\n      this.lastSeiTime = this.player ? this.player.currentTime : 0\n    } catch (e) {}\n  }\n\n\n  resize (width, height) {\n    const { baseSizeX, baseSizeY, minMobileSize, minSize, fitVideo, offsetBottom } = this.config\n    const { scale } = this._videoMeta\n    this._videoMeta.lwidth = width\n    this._videoMeta.lheight = height\n    let vWidth; let vHeight = 0\n    if (height / width * 100 >= scale) {\n      vHeight = parseInt(scale * width, 10) / 100\n      vWidth = width\n    } else {\n      vHeight = height\n      vWidth = parseInt(height / scale * 100, 10)\n    }\n    // this._log(`height:${height} width:${width} vWidth:${vWidth} vHeight:${vHeight} this._videoMeta.vWidth:${this._videoMeta.vWidth} this._videoMeta.vHeight:${this._videoMeta.vHeight}`)\n    this._videoMeta.vWidth = vWidth\n    this._videoMeta.vHeight = vHeight\n    let _size = 0\n    let fontSize = 0\n    if (scale > 120) {\n      _size = baseSizeY\n      fontSize = parseInt(_size * vHeight / 1080, 10)\n    } else {\n      _size = baseSizeX\n      fontSize = parseInt(_size * vWidth / 1920, 10)\n    }\n    const mini = IS_MOBILE ? minMobileSize : minSize\n    fontSize = fontSize < mini ? mini : (fontSize > _size ? _size : fontSize)\n    const style = {\n      fontSize\n    }\n    const vBottom = parseInt((height - vHeight) / 2, 10)\n    const vLeft = parseInt((width - vWidth) / 2, 10)\n    const marginBottom = parseInt(vHeight * offsetBottom, 10) / 100\n    this._videoMeta.vBottom = vBottom\n    this._videoMeta.vLeft = vLeft\n    this._videoMeta.marginBottom = marginBottom\n    if (fitVideo) {\n      style.bottom = vBottom + marginBottom\n      style.left = style.right = vLeft\n    }\n    // this._log(`fitVideo vLeft:${vLeft} vBottom:${vBottom} marginBottom:${marginBottom} vWidth:${vWidth} vHeight:${vHeight} fontSize:${fontSize}`)\n    Object.keys(style).map(item => {\n      this.root.style[item] = `${style[item]}px`\n    })\n    this.emit(EVENTS.RESIZE, {\n      vLeft,\n      vBottom,\n      marginBottom,\n      vWidth,\n      vHeight,\n      fontSize,\n      scale\n    })\n  }\n\n  __startResize (target) {\n    const rect = target.getBoundingClientRect()\n    const { _videoMeta } = this\n    const { width, height } = rect\n    if (this._iId) {\n      clearTimeout(this._iId)\n      this._iId = null\n    }\n    // this._log(`__startResize width:${width} height:${height} lwidth:${this._videoMeta.lwidth} lheight:${this._videoMeta.lheight}`)\n    if (width > 0 && height > 0 && (width !== _videoMeta.lwidth || height !== _videoMeta.lheight)) {\n      this._iC = 0\n      this.resize(width, height)\n    } else {\n      if (this._iC >= 5) {\n        this._iC = 0\n        return\n      }\n      this._iC++\n      this._iId = setTimeout(() => {\n        this.__startResize(target)\n      }, 50)\n    }\n  }\n\n  /**\n   * @description 过期字幕移除\n   * @param {Array} list 当前的列表\n   * @param {number} time 需要移除的时间点\n   * @returns\n   */\n  __removeByTime (list, time) {\n    const ids = []\n    for (let i = 0; i < list.length; i++) {\n      if (!time || list[i].end < time) {\n        ids.push(i)\n      }\n    }\n    if (ids.length === 0) {\n      return\n    }\n    list.splice(ids[0], ids.length)\n    this.config.domRender && this.__remove (ids)\n  }\n\n  /**\n   * @description 移除过期dom\n   * @param {Array<number>} ids\n   * @returns\n   */\n  __remove (ids) {\n    if (!ids || ids.length < 1) {\n      return\n    }\n    this._log('>>>>_renderByWords__remove', ids)\n    const children = this.innerRoot.children\n    const removeIndex = []\n    for (let i = 0; i < children.length; i++) {\n      const index = Number(children[i].getAttribute('data-index'))\n      if (ids.includes(index)) {\n        removeIndex.push(children[i])\n      }\n    }\n    removeIndex.map(item => {\n      this.innerRoot.removeChild(item)\n    })\n  }\n\n  /**\n   * @description 渲染新增dom\n   * @param {Array<any>} jsonItems\n   */\n  __render (jsonItems = []) {\n    this._log('__render', jsonItems.length, this.config.domRender)\n    const { renderMode, domRender } = this.config\n    if (jsonItems.length > 0 && domRender) {\n      jsonItems.forEach(jsonItem => {\n        let className = `text-track-${this.config.line}`\n        jsonItem.text.forEach((itemText, index) => {\n          if (index > 0) {\n            className += ' text-track-deputy'\n          }\n          const attr = {\n            // 'data-tag': jsonItem.textTag[index],\n            'data-start': jsonItem.start,\n            'data-end': jsonItem.end,\n            'data-index': jsonItem.index\n          }\n          const _dom = Util.createDom('xg-text-track-span', '', attr, className)\n          this.innerRoot.appendChild(_dom)\n          if (renderMode === 'step') {\n            // 用于宽度占位\n            const _dom1 = Util.createDom('xg-text-track-span', '', attr, `${className} text-track-space`)\n            this.innerRoot.appendChild(_dom1)\n            _dom1.innerHTML = itemText\n            setTimeout(() => {\n              this._renderByWords(_dom, index, jsonItem.start, jsonItem.end, itemText)\n            }, 600)\n          } else {\n            _dom.innerHTML = itemText\n          }\n        })\n      })\n    }\n  }\n\n  _renderByWords (_dom, index, start, end, itemText) {\n    const _textNode = document.createTextNode('')\n    _dom.appendChild(_textNode)\n    const _words = Util.splitWords(itemText)\n    let curTime = this._getPlayerCurrentTime()\n    let duration = parseInt((end - curTime) * 1000, 10)\n    if (curTime >= end) {\n      return\n    } else if (start >= curTime) {\n      curTime = start\n    }\n    if (duration > 300) {\n      duration -= 50\n    }\n    const _len = _words.length\n    const _task = {\n      dom: _textNode,\n      ids: index,\n      wordList: _words,\n      interval: duration / _len,\n      start: curTime,\n      end,\n      duration,\n      lastTime: 0\n    }\n    this._log('>>>>_renderByWords', duration, _task)\n    const { _curRenderTask } = this\n    let _index = -1\n    for (let i = 0; i < _curRenderTask.length; i++) {\n      if (_curRenderTask[i].ids === index) {\n        _index = i\n        break\n      }\n    }\n    if (_index > -1) {\n      _curRenderTask.slice(_index, 1)\n    }\n    _curRenderTask.push(_task)\n    this.startRender(-1)\n  }\n\n  startRender = (timer) => {\n    if (timer > 0 && this._renderIntervalId) {\n      window.cancelAnimationFrame(this._renderIntervalId)\n      this._renderIntervalId = -1\n    }\n    if (!this.textTrack) {\n      return\n    }\n    const { _curRenderTask } = this\n    this._lastTimeStamp = new Date().getTime()\n    const emptyArr = [] // 单词列表为空需要清空的索引\n    _curRenderTask.forEach((item, index) => {\n      const { lastTime, wordList, interval, dom, ids } = item\n      if (timer < 0 || this._lastTimeStamp < 0 || this._lastTimeStamp - lastTime >= interval) {\n        const _words = wordList.shift()\n        _words && dom.appendData(_words)\n        item.lastTime = this._lastTimeStamp\n      }\n      if (wordList.length < 1) {\n        emptyArr.push({\n          index,\n          ids: ids\n        })\n      }\n    })\n    this._log('>>>>_renderByWords emptyArr', emptyArr.length, _curRenderTask.length)\n    emptyArr.forEach(item => {\n      _curRenderTask.splice(item.index, 1)\n      this._log('>>>_renderByWords remove emptyArr', item.index, _curRenderTask.length)\n    })\n    if (_curRenderTask.length > 0) {\n      this._renderIntervalId = window.requestAnimationFrame(this.startRender)\n    }\n  }\n\n  stopRender () {\n    if (this._renderIntervalId) {\n      window.cancelAnimationFrame(this._renderIntervalId)\n    }\n  }\n\n  show () {\n    if (!this.config.domRender) {\n      return\n    }\n    Util.removeClass(this.root, 'text-track-hide')\n  }\n\n  hide () {\n    if (!this.config.domRender) {\n      return\n    }\n    Util.addClass(this.root, 'text-track-hide')\n    this.innerRoot.innerHTML = ''\n  }\n\n  destroy = () => {\n    this.detachPlayer()\n    this.removeAllListeners()\n    this.player = null\n    this.textTrack = null\n    this._curRenderTask = []\n    this.stopRender()\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param { any } [data]\n   * @returns\n   */\n  emit (event, data, ...args) {\n    super.emit(event, data, ...args)\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param { (data?: any) => any } callback\n   * @returns\n   */\n  on (event, callback, ...args) {\n    super.on(event, callback, ...args)\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param { (data?: any) => any } callback\n   * @returns\n   */\n  once (event, callback, ...args) {\n    super.once(event, callback, ...args)\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param { (data?: any) => any } callback\n   * @returns\n   */\n  off (event, callback, ...args) {\n    super.off(event, callback, ...args)\n  }\n\n  offAll () {\n    super.removeAllListeners()\n  }\n\n  /**\n   * @description 获取底部边距\n   */\n  get marginBottom () {\n    const { bottom, marginBottom } = this._videoMeta\n    return this.config.fitVideo ? bottom + marginBottom : marginBottom\n  }\n}\n"],"names":["has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","names","events","name","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","module","exports","VTT_CHECK","VTT_STYLE","VTT_CUE","VTT_CUEND","ASS_CHECK","TIME_REGEX_LIST","ASS_FORMAT","ASS_STYLE","ASS_DIALOGUE","getSecond","arr","Number","isNumber","str","test","getByIndex","SubTitleParser","_classCallCheck","key","value","list","ret","count","item","start","end","fun","format","checkFormat","parseASS","parseVTT","styles","error","console","mode","values","split","text","splice","join","replace","map","index","textTag","retData","groupCount","lastSubTitle","toLocaleLowerCase","subTitle","parseASSItem","_lastSubTitle","style","group","keyArr","trim","charAt","toUpperCase","isLastSpace","isCueStart","styleInfo","styleHeader","cueMatch","exec","time","checkIsTime","parseVttTime","_lastSubTitle2","parseVttText","tag","match","langMatch","retText","newReg","textMatch","RegExp","re","tagsReg","aArr","bArr","ERROR","code","msg","_ERROR","keys","XHR","_createClass","_ref","url","_ref$method","method","_ref$type","type","_ref$timeout","timeout","_ref$data","data","Promise","resolve","reject","R","window","XMLHttpRequest","_method","_data","responseType","forEach","k","onload","status","res","Error","onerror","e","ontimeout","onabort","open","send","setRequestHeader","ProxyPromise","resolvePromise","rejectPromise","publicPromise","state","isBreak","reason","hasClass","el","className","classList","some","orgClassName","_typeof","getAttribute","addClass","add","setAttribute","findIndexByTime","currentTime","findCIndexByTime","ids","typeOf","obj","toString","createDom","tpl","attrs","cname","dom","document","createElement","innerHTML","parse","content","promise","parseJson","err","loadSubTitle","object","then","response","_objectSpread","catch","_err","statusText","message","src","checkSubtitle","dist","id","language","isEnglish","patchABCbiaodian","reg","ResizeObserver","_this","__handlers","observer","entries","__trigger","target","handler","observe","unobserve","disconnect","cr","_this2","contentRect","__runHandler","resizeObserver","EVENTS","formatUrl","Util","IS_MOBILE","Subtitle","_EventEmitter","_inherits","_super","_createSuper","options","ua","isWindowsPhone","isSymbian","isAndroid","isFireFox","isTablet","_defineProperty","_assertThisInitialized","stopRender","_curRenderTask","startRender","_isOpen","_this$player$video","player","video","videoWidth","videoHeight","_videoMeta","scale","_onResize","root","curTime","_getPlayerCurrentTime","Math","round","abs","_ctime","currentText","config","updateMode","_liveUpdate","_update","_assertThisInitialize","domRender","Element","_iId","clearTimeout","_this$player$video2","parseInt","__startResize","eventName","_onSubtitleSegment","_onSubtitlePlaylist","_onCoreSeiintime","timer","_renderIntervalId","cancelAnimationFrame","textTrack","_lastTimeStamp","Date","getTime","emptyArr","lastTime","wordList","interval","_words","shift","appendData","_log","requestAnimationFrame","detachPlayer","navigator","userAgent","currentExtText","_cid","_gid","_cids","_iC","line","bottom","defaultOpen","baseSizeX","baseSizeY","minSize","minMobileSize","fitVideo","offsetBottom","fontColor","renderMode","debugger","_loadingTrack","lwidth","lheight","vWidth","vHeight","vBottom","vLeft","marginBottom","subTitles","attachPlayer","seiTime","lastSeiTime","_curTexts","setSubTitles","_possibleConstructorReturn","get","isOpen","ieRemoveFirst","innerRoot","switchOff","isDefault","switch","_loadTrack","addStyles","_this3","_isCurrent","_loadTrackUrls","preTag","cssText","styleTag","head","getElementsByTagName","styleSheet","func","disabled","setTimeout","textNode","createTextNode","appendChild","_this4","_this$config","color","addObserver","destroy","_onTimeupdate","_onPause","_onPlay","_onCoreEvents","unObserver","removeChild","_this5","subtitle","_updateCurrent","switchOn","nextSubtitle","__removeByTime","_emitPlayerSwitch","_this6","show","hide","_console","_len2","_key","log","_this7","contentType","json","stringContent","urls","_pushList","curSubtitle","nextSubTitle","lang","maxCount","_this8","loadingCount","finally","_start","_end","_index","_this9","__remove","_this10","oldArr","newArr","includes","_this11","getItemsByIndex","gid","cids","gList","_len","_si","__render","_this12","delCids","getDelCid","newCids","getNewCid","texts","textExt","subtitleList","label","default","mUrl","urlList","sn","_sub","duration","updateSubTitle","sei","width","height","_this13","_this$config2","_size","fontSize","mini","left","right","_this14","rect","getBoundingClientRect","resize","_this15","children","removeIndex","_this16","jsonItems","_this$config3","jsonItem","itemText","attr","_dom","_dom1","_renderByWords","_textNode","retArr","lastIsEn","_str","_lIdx","_task","removeClass","remove","_get2","_len3","_key2","_get","_getPrototypeOf","callback","_get3","_len4","_key3","_get4","_len5","_key4","_get5","_len6","_key5","_this$_videoMeta"],"mappings":"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"}