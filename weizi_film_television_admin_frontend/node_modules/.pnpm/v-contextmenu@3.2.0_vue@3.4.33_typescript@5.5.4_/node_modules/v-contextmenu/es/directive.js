import { isRef } from 'vue';
var bind = function (el, binding) {
    var _a;
    var contextmenuKey = binding.arg;
    if (!contextmenuKey) {
        console.error('参数有误');
        return;
    }
    var contextmenuOptions = binding.value;
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    var contextmenuInstance = isRef(contextmenuKey)
        ? contextmenuKey.value
        : (_a = binding.instance) === null || _a === void 0 ? void 0 : _a.$refs[contextmenuKey];
    if (!contextmenuInstance) {
        console.error("\u6CA1\u6709\u627E\u5230 ".concat(contextmenuKey, " \u5BF9\u5E94\u7684\u5B9E\u4F8B"));
        return;
    }
    if (typeof contextmenuInstance.addReference !== 'function') {
        console.error("".concat(contextmenuKey, " \u5BF9\u5E94\u7684\u5B9E\u4F8B\u4E0D\u662F VContextmenu"));
        return;
    }
    el.$contextmenuKey = contextmenuKey;
    contextmenuInstance.addReference(el, contextmenuOptions);
};
var unbind = function (el, binding) {
    var _a;
    var contextmenuKey = el.$contextmenuKey;
    if (!contextmenuKey)
        return;
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    var contextmenuInstance = isRef(contextmenuKey)
        ? contextmenuKey.value
        : (_a = binding.instance) === null || _a === void 0 ? void 0 : _a.$refs[contextmenuKey];
    if (!contextmenuInstance) {
        console.error("\u6CA1\u6709\u627E\u5230 ".concat(contextmenuKey, " \u5BF9\u5E94\u7684\u5B9E\u4F8B"));
        return;
    }
    if (typeof contextmenuInstance.removeReference !== 'function') {
        console.error("".concat(contextmenuKey, " \u5BF9\u5E94\u7684\u5B9E\u4F8B\u4E0D\u662F VContextmenu"));
        return;
    }
    contextmenuInstance.removeReference(el);
};
var rebind = function (el, binding) {
    unbind(el, binding);
    bind(el, binding);
};
var contextmenuDirective = {
    mounted: bind,
    updated: rebind,
    beforeUnmount: unbind,
};
export default contextmenuDirective;
//# sourceMappingURL=directive.js.map