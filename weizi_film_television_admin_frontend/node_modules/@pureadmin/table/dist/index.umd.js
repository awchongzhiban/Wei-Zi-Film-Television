(function(m,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus"],e):e((m=typeof globalThis<"u"?globalThis:m||self).PureTable={},m.Vue,m.ElementPlus)})(this,function(m,e,O){"use strict";function fe(t){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const o in t)if(o!=="default"){const l=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>t[o]})}}return n.default=t,Object.freeze(n)}const V=fe(e),ge=Object.prototype.hasOwnProperty,L=(t,n)=>ge.call(t,n),H=t=>t!==null&&typeof t=="object",W="__epPropKey",me=((t,n)=>{if(!H(t)||H(o=t)&&o[W])return t;var o;const{values:l,required:p,default:c,type:i,validator:S}=t,v=l||S?x=>{let f=!1,y=[];if(l&&(y=Array.from(l),L(t,"default")&&y.push(c),f||(f=y.includes(x))),S&&(f||(f=S(x))),!f&&y.length>0){const u=[...new Set(y)].map($=>JSON.stringify($)).join(", ");e.warn(`Invalid prop: validation failed${n?` for prop "${n}"`:""}. Expected one of [${u}], got value ${JSON.stringify(x)}.`)}return f}:void 0,C={type:i,required:!!p,validator:v,[W]:!0};return L(t,"default")&&(C.default=c),C})({type:String,values:["","default","small","large"],required:!1});/**
  * @vue/shared v3.4.21
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **/var ye={data:{type:Array,default:()=>[]},size:me,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object]};const be={tableKey:{type:[String,Number],default:"0"},columns:{type:Array,default:[]},loading:{type:Boolean,default:!1},loadingConfig:{type:Object,default:()=>{}},alignWhole:{type:String,default:"left"},headerAlign:{type:String,default:""},showOverflowTooltip:{type:Boolean,default:!1},rowHoverBgColor:{type:String,default:""},pagination:{type:Object,default:{total:0,pageSize:5,align:"right",background:!1,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"}},paginationSmall:{type:Boolean,default:!1},adaptive:{type:Boolean,default:!1},adaptiveConfig:{type:Object,default:{offsetBottom:96,fixHeader:!0,timeout:60,zIndex:3}},locale:{type:[String,Object],default:""},...ye},he={render:{type:Function},params:{type:Object}},I=e.defineComponent({name:"Renderer",props:he,setup:t=>()=>e.createVNode(e.Fragment,null,[t.render(t.params)])}),K={name:"en",el:{select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"}}},q={name:"zh-cn",el:{select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"}}},_={name:"zh-tw",el:{select:{loading:"載入中",noMatch:"無相符資料",noData:"無資料",placeholder:"請選擇"},pagination:{goto:"前往",pagesize:"項/頁",total:"共 {total} 項",pageClassifier:"頁",page:"頁",prev:"上一頁",next:"下一頁",currentPage:"第 {pager} 頁",prevPages:"向前 {pager} 頁",nextPages:"向后 {pager} 頁",deprecationWarning:"偵測到已過時的使用方式，請參閱 el-pagination 說明文件以了解更多資訊"},table:{emptyText:"暫無資料",confirmFilter:"篩選",resetFilter:"重置",clearFilter:"全部",sumText:"合計"}}};var G=Object.defineProperty,ve=Object.getOwnPropertyDescriptor,xe=Object.getOwnPropertyNames,we=Object.prototype.hasOwnProperty,J=(t,n,o,l)=>{if(n&&typeof n=="object"||typeof n=="function")for(let p of xe(n))!we.call(t,p)&&p!==o&&G(t,p,{get:()=>n[p],enumerable:!(l=ve(n,p))||l.enumerable});return t},Oe=Object.prototype.toString;function U(t,n){return Oe.call(t)===`[object ${n}]`}function Z(t){return U(t,"String")}function Q(t){return typeof t=="function"}var X,Y,ee=t=>t.replace(/\B([A-Z])/g,"-$1").toLowerCase(),h={};((t,n)=>{for(var o in n)G(t,o,{get:n[o],enumerable:!0})})(h,{Vue:()=>V}),J(h,X=V,"default"),Y&&J(Y,X,"default");var Se=t=>{let n,o=(t==null?void 0:t.className)??"dark",l=(0,h.shallowRef)(!1),p=()=>{let c=t!=null&&t.selector?t.selector==="html"?document.documentElement:document.body:document.documentElement;l.value=c.classList.contains(o)};return function(c){(0,h.getCurrentInstance)()&&(0,h.onUnmounted)(c)}(()=>{n&&(n.takeRecords(),n.disconnect())}),(0,h.onBeforeMount)(()=>{let c=t!=null&&t.selector?t.selector==="html"?document.documentElement:document.body:document.documentElement;p(),n=new MutationObserver(p),n.observe(c,{attributes:!0,attributeFilter:["class"]})}),{isDark:l,toggleDark:()=>{(t!=null&&t.selector?t.selector==="html"?document.documentElement:document.body:document.documentElement).classList.toggle(o)}}};function te(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e.isVNode(t)}const E=e.defineComponent({name:"PureTable",props:be,directives:{Loading:O.ElLoadingDirective},emits:["page-size-change","page-current-change"],setup(t,{slots:n,attrs:o,emit:l,expose:p}){const{locale:c,i18n:i,ssr:S}=e.inject("locale",{locale:null,i18n:null,ssr:!1}),{locale:v,columns:C,loading:x,tableKey:f,adaptive:y,pagination:u,alignWhole:$,headerAlign:je,loadingConfig:N,adaptiveConfig:j,rowHoverBgColor:re,showOverflowTooltip:Te}=e.toRefs(t),ae=e.ref(!1),{isDark:Pe}=Se(),A=e.getCurrentInstance();let Ce=e.unref(u)&&e.unref(u).currentPage&&e.unref(u).pageSize,oe=e.computed(()=>{var a,g,s,b;if(!e.unref(i))return;const r=((s=(g=i==null?void 0:i.global)==null?void 0:g.getLocaleMessage(e.unref((a=i==null?void 0:i.global)==null?void 0:a.locale)))==null?void 0:s.el)||((b=i==null?void 0:i.getLocaleMessage(e.unref(i==null?void 0:i.locale)))==null?void 0:b.el);return r?{el:r}:null}),le=e.computed(()=>Z(c)?[K,q,_].filter(r=>r.name===ee(c))[0]:c),D=e.computed(()=>{if(e.unref(v))return Z(e.unref(v))?[K,q,_].filter(r=>r.name===ee(e.unref(v)))[0]:e.unref(v)}),Ne=e.computed(()=>{if(!e.unref(N))return;let{text:r,spinner:a,svg:g,viewBox:s}=e.unref(N);return{"element-loading-text":r,"element-loading-spinner":a,"element-loading-svg":g,"element-loading-svg-view-box":s}});const Be=e.computed(()=>{var r,a;if(e.unref(x))return{"element-loading-background":(r=e.unref(N))!=null&&r.background?(a=e.unref(N))==null?void 0:a.background:Pe.value?"rgba(0, 0, 0, 0.45)":"rgba(255, 255, 255, 0.45)"}}),Fe=e.computed(()=>Object.assign({width:"100%",margin:"16px 0",display:"flex",flexWrap:"wrap",justifyContent:e.unref(u).align==="left"?"flex-start":e.unref(u).align==="center"?"center":"flex-end"},e.unref(u).style??{})),ie=(r,a)=>{const{cellRenderer:g,slot:s,headerRenderer:b,headerSlot:T,hide:w,children:F,prop:z,...ze}=r;if(Q(w)&&w(o))return w(o);if(function(d){return U(d,"Boolean")}(w)&&w)return w;const M={default:d=>{var P;return g?e.createVNode(I,{render:g,params:Object.assign(d,{index:d.$index,props:t,attrs:o})},null):s?(P=n==null?void 0:n[s])==null?void 0:P.call(n,Object.assign(d,{index:d.$index,props:t,attrs:o})):void 0}};let R=b?{header:d=>e.createVNode(I,{render:b,params:Object.assign(d,{index:d.$index,props:t,attrs:o})},null),...M}:n!=null&&n[T]?{header:d=>{var P;return(P=n==null?void 0:n[T])==null?void 0:P.call(n,Object.assign(d,{index:d.$index,props:t,attrs:o}))},...M}:M;return(F==null?void 0:F.length)>0&&(R=F.map(ie)),e.createVNode(O.ElTableColumn,e.mergeProps({key:a},ze,{prop:Q(z)&&z(a)?z(a):z,align:r!=null&&r.align?r.align:e.unref($),headerAlign:r!=null&&r.headerAlign?r.headerAlign:e.unref(je),showOverflowTooltip:r!=null&&r.showOverflowTooltip?r.showOverflowTooltip:e.unref(Te)}),te(R)?R:{default:()=>[R]})},ue=()=>{var r;return(r=A==null?void 0:A.proxy)==null?void 0:r.$refs[`TableRef${e.unref(f)}`]},B=()=>ue().$refs,k=async()=>{await e.nextTick();const r=B().tableWrapper,a=e.unref(j).offsetBottom??96;r.style.height=window.innerHeight-r.getBoundingClientRect().top-a+"px"},se=((r,a=200,g=!1)=>{let s,b,T=a;return function(){s&&clearTimeout(s),g?(s||r.call(b,...arguments),s=setTimeout(()=>s=null,T)):s=setTimeout(()=>r.call(b,...arguments),T)}})(k,e.unref(j).timeout??60),pe=async(r=3)=>{await e.nextTick();const a=B().tableHeaderRef.$el.style;a.position="sticky",a.top=0,a.zIndex=r};e.onMounted(()=>{ae.value=!0,e.nextTick(()=>{if(e.unref(re)&&B().tableWrapper.style.setProperty("--el-table-row-hover-bg-color",e.unref(re),"important"),e.unref(y)){if(k(),window.addEventListener("resize",se),Reflect.has(e.unref(j),"fixHeader")&&!e.unref(j).fixHeader)return;pe(e.unref(j).zIndex??3)}})}),e.onBeforeUnmount(()=>{e.unref(y)&&window.removeEventListener("resize",se)}),p({getTableRef:ue,getTableDoms:B,setAdaptive:k,setHeaderSticky:pe});let ce=()=>e.createVNode(e.Fragment,null,[e.createVNode(O.ElTable,e.mergeProps(t,o,{ref:`TableRef${e.unref(f)}`}),{default:()=>e.unref(C).map(ie),append:()=>n.append&&n.append(),empty:()=>n.empty&&n.empty()}),Ce?e.createVNode(O.ElPagination,e.mergeProps(o,{class:"pure-pagination",style:e.unref(Fe)},e.unref(u),{small:t!=null&&t.paginationSmall?t==null?void 0:t.paginationSmall:!!e.unref(u).small&&e.unref(u).small,layout:e.unref(u).layout??"total, sizes, prev, pager, next, jumper",pageSizes:e.unref(u).pageSizes??[5,10,15,20],onSizeChange:r=>(a=>{e.unref(u).pageSize=a,l("page-size-change",a)})(r),onCurrentChange:r=>(a=>{e.unref(u).currentPage=a,l("page-current-change",a)})(r)}),null):null]),de=()=>{let r;return e.withDirectives(e.createVNode("div",e.mergeProps({class:"pure-table",style:"width:100%"},e.unref(Be),e.unref(Ne)),[e.unref(oe)||e.unref(le)||e.unref(D)?e.createVNode(O.ElConfigProvider,{locale:e.unref(D)?e.unref(D):e.unref(oe)||e.unref(le)},te(r=ce())?r:{default:()=>[r]}):ce()]),[[e.resolveDirective("loading"),e.unref(x)]])};return()=>S?ae.value&&de():de()}}),ne=Object.assign(E,{install:(t,n)=>{t.component(E.name,E),t.provide("locale",n??{locale:null,i18n:null,ssr:!1})}});m.PureTable=ne,m.default=ne,Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
