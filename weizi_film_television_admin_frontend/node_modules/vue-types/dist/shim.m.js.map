{"version":3,"file":"shim.m.js","sources":["../src/sensibles.ts","../src/config.ts","../src/shim.ts"],"sourcesContent":["import { VueTypesDefaults } from './types'\n\nexport const typeDefaults = (): VueTypesDefaults => ({\n  func: () => undefined,\n  bool: true,\n  string: '',\n  number: 0,\n  array: () => [],\n  object: () => ({}),\n  integer: 0,\n})\n","import { VueTypesConfig } from './types'\n\nexport const config: VueTypesConfig = {\n  silent: false,\n  logLevel: 'warn',\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { isPlainObject } from 'is-plain-object'\nimport { typeDefaults } from './sensibles'\nimport { config } from './config'\nimport type { VueTypesDefaults } from './types'\nexport type { VueTypeDef, VueTypeValidableDef } from './types'\nconst dfn = Object.defineProperty\n\nconst isArray =\n  Array.isArray ||\n  function (value) {\n    return Object.prototype.toString.call(value) === '[object Array]'\n  }\n\nfunction type(name: string, props: any = {}, validable = false): any {\n  const descriptors: PropertyDescriptorMap = {\n    _vueTypes_name: {\n      value: name,\n      writable: true,\n    },\n    def: {\n      value(this: any, v: any) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const t = this\n        if (v === undefined) {\n          if ('default' in this) {\n            delete this.default\n          }\n          return this\n        }\n        if (isArray(v)) {\n          t.default = () => [].concat(v as any)\n        } else if (isPlainObject(v)) {\n          t.default = () => Object.assign({}, v)\n        } else {\n          t.default = v\n        }\n        return t\n      },\n    },\n    isRequired: {\n      get(this: any) {\n        this.required = true\n        return this\n      },\n    },\n  }\n\n  if (validable) {\n    ;(descriptors as any).validate = {\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      value() {},\n    }\n  }\n  if (!props.validator) {\n    props.validator = () => true\n  }\n\n  return Object.defineProperties(props, descriptors)\n}\n\nexport { config }\n\ntype TypeShim = <T = any>(...args: any[]) => any\n\nexport const any: TypeShim = () => type('any', {}, true)\nexport const func: TypeShim = () => type('func', { type: Function }, true)\nexport const bool = () => type('bool', { type: Boolean }, true)\nexport const string: TypeShim = () => type('string', { type: String }, true)\nexport const number: TypeShim = () => type('number', { type: Number }, true)\nexport const array: TypeShim = () => type('array', { type: Array }, true)\nexport const object: TypeShim = () => type('object', { type: Object }, true)\nexport const symbol = () => type('symbol')\nexport const integer: TypeShim = () => type('integer', { type: Number })\nexport const oneOf: TypeShim = (_a: any) => type('oneOf')\nexport const custom: TypeShim = (_a: any) => type('custom')\nexport const instanceOf: TypeShim = (Constr: any) =>\n  type('instanceOf', { type: Constr })\nexport const oneOfType: TypeShim = (_a: any) => type('oneOfType')\nexport const arrayOf: TypeShim = (_a: any) => type('arrayOf', { type: Array })\n\nexport const objectOf: TypeShim = (_a: any) =>\n  type('objectOf', { type: Object })\nexport const shape: TypeShim = (_a: any) =>\n  dfn(type('shape', { type: Object }), 'loose', {\n    get() {\n      return this\n    },\n  })\nexport const nullable: TypeShim = () => ({\n  type: null,\n})\n/* eslint-enable @typescript-eslint/no-unused-vars */\n\nfunction createValidator(\n  root: any,\n  name: string,\n  props: any,\n  getter = false,\n  validable = false,\n) {\n  const prop = getter ? 'get' : 'value'\n  const descr = {\n    [prop]: () =>\n      type(name, Object.assign({}, props), validable).def(\n        getter ? root.defaults[name] : undefined,\n      ),\n  }\n\n  return dfn(root, name, descr)\n}\n\nexport function fromType(name: string, source: any, props: any = {}) {\n  const t = type(name, Object.assign({}, source, props), !!source.validable)\n  t.validator && delete t.validator\n  return t\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const toValidableType = <T>(name: string, props: any) =>\n  type(name, props, true)\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const toType = <T>(name: string, props: any) => type(name, props)\n\nconst BaseVueTypes = /*#__PURE__*/ (() =>\n  // eslint-disable-next-line @typescript-eslint/no-extraneous-class\n  class BaseVueTypes {\n    static defaults: Partial<VueTypesDefaults> = {}\n\n    static sensibleDefaults: Partial<VueTypesDefaults> | boolean\n\n    static config = config\n\n    static get any() {\n      return any()\n    }\n    static get func() {\n      return func().def(this.defaults.func)\n    }\n    static get bool() {\n      return bool().def(this.defaults.bool)\n    }\n    static get string() {\n      return string().def(this.defaults.string)\n    }\n    static get number() {\n      return number().def(this.defaults.number)\n    }\n    static get array() {\n      return array().def(this.defaults.array)\n    }\n    static get object() {\n      return object().def(this.defaults.object)\n    }\n    static get symbol() {\n      return symbol()\n    }\n    static get integer() {\n      return integer().def(this.defaults.integer)\n    }\n    static get nullable() {\n      return nullable()\n    }\n    static oneOf = oneOf\n    static custom = custom\n    static instanceOf = instanceOf\n    static oneOfType = oneOfType\n    static arrayOf = arrayOf\n    static objectOf = objectOf\n    static shape = shape\n    static extend<T = any>(props: any): T {\n      if (isArray(props)) {\n        props.forEach((p) => this.extend(p))\n        return this as any\n      }\n      const { name, validate, getter = false, type = null } = props\n      // If we are inheriting from a custom type, let's ignore the type property\n      const extType = isPlainObject(type) && type.type ? null : type\n      return createValidator(this, name, { type: extType }, getter, !!validate)\n    }\n    static utils = {\n      toType: type as (...args: any[]) => any,\n      validate: (...args: any[]) => !!args,\n    }\n  })()\n\nexport function createTypes(defs: Partial<VueTypesDefaults> = typeDefaults()) {\n  return class extends BaseVueTypes {\n    static defaults = Object.assign({}, defs)\n\n    static get sensibleDefaults() {\n      return Object.assign({}, this.defaults)\n    }\n\n    static set sensibleDefaults(v: boolean | Partial<VueTypesDefaults>) {\n      if (v === false) {\n        this.defaults = {}\n        return\n      }\n      if (v === true) {\n        this.defaults = Object.assign({}, defs)\n        return\n      }\n      this.defaults = Object.assign({}, v)\n    }\n  }\n}\n\nexport function validateType<T, U>(\n  _type: T,\n  _value: U,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _silent = false,\n): string | boolean {\n  return true\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  config.silent === false &&\n    console.warn(\n      'You are using the production shimmed version of VueTypes in a development build. Refer to https://dwightjack.github.io/vue-types/guide/installation.html#production-build to learn how to configure VueTypes for usage in multiple environments.',\n    )\n}\n\nexport default class VueTypes /*#__PURE__*/ extends createTypes() {}\n"],"names":["config","silent","logLevel","dfn","Object","defineProperty","isArray","Array","value","prototype","toString","call","type","name","props","validable","descriptors","_vueTypes_name","writable","def","v","undefined","this","concat","isPlainObject","assign","isRequired","get","required","validate","validator","defineProperties","any","func","Function","bool","Boolean","string","String","number","Number","array","object","symbol","integer","oneOf","_a","custom","instanceOf","Constr","oneOfType","arrayOf","objectOf","shape","nullable","createValidator","root","getter","_descr","descr","defaults","fromType","source","t","toValidableType","toType","BaseVueTypes","_BaseVueTypes","_createClass","extend","_this","forEach","p","_props$getter","_props$type","key","sensibleDefaults","utils","slice","arguments","createTypes","defs","_Class","_BaseVueTypes2","apply","_inheritsLoose","set","validateType","_type","_value","_silent","process","env","NODE_ENV","console","warn","VueTypes","_createTypes"],"mappings":"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"}