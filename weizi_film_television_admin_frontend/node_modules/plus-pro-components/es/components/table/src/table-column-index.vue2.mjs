import { defineComponent, openBlock, createBlock, unref, mergeProps, withCtx, createElementVNode, normalizeStyle, toDisplayString, createElementBlock } from 'vue';
import '../../../constants/index.mjs';
import '../../utils/index.mjs';
import { ElTableColumn, ElTooltip } from 'element-plus';
import { DefaultPageInfo } from '../../../constants/page.mjs';
import { isFunction, isPlainObject } from '../../utils/is.mjs';

var _sfc_main = /* @__PURE__ */ defineComponent({
  ...{
    name: "PlusTableTableColumnIndex"
  },
  __name: "table-column-index",
  props: {
    pageInfo: { type: null, required: false, default: () => ({ ...DefaultPageInfo }) },
    indexTableColumnProps: { type: null, required: false, default: () => ({}) },
    max: { type: Number, required: false, default: 999 },
    indexContentStyle: { type: [Object, Function], required: false, default: () => ({}) }
  },
  setup(__props) {
    const props = __props;
    const getTableIndex = (index) => {
      var _a, _b;
      const i = ((((_a = props.pageInfo) == null ? void 0 : _a.page) || DefaultPageInfo.page) - 1) * (((_b = props.pageInfo) == null ? void 0 : _b.pageSize) || DefaultPageInfo.page) + index + 1;
      return +i;
    };
    const indexContentStyle = (row, index) => {
      if (isFunction(props.indexContentStyle)) {
        return props.indexContentStyle(row, index);
      } else if (isPlainObject(props.indexContentStyle)) {
        return props.indexContentStyle;
      } else {
        return {};
      }
    };
    return (_ctx, _cache) => {
      return openBlock(), createBlock(
        unref(ElTableColumn),
        mergeProps({
          key: "index",
          label: "#",
          fixed: "left",
          type: "index",
          "class-name": "plus-table-column-index",
          width: "60",
          align: "center",
          index: getTableIndex
        }, _ctx.indexTableColumnProps),
        {
          default: withCtx(({ row, $index }) => [
            getTableIndex($index) > 999 ? (openBlock(), createBlock(unref(ElTooltip), {
              key: 0,
              content: String(getTableIndex($index)),
              placement: "top-start"
            }, {
              default: withCtx(() => [
                createElementVNode(
                  "div",
                  {
                    class: "plus-table-column-index__content",
                    style: normalizeStyle(indexContentStyle(row, $index))
                  },
                  toDisplayString(getTableIndex($index)),
                  5
                  /* TEXT, STYLE */
                )
              ]),
              _: 2
              /* DYNAMIC */
            }, 1032, ["content"])) : (openBlock(), createElementBlock(
              "div",
              {
                key: 1,
                class: "plus-table-column-index__content",
                style: normalizeStyle(indexContentStyle(row, $index))
              },
              toDisplayString(getTableIndex($index)),
              5
              /* TEXT, STYLE */
            ))
          ]),
          _: 1
          /* STABLE */
        },
        16
        /* FULL_PROPS */
      );
    };
  }
});

export { _sfc_main as default };
